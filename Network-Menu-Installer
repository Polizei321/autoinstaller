@echo off
setlocal

set "batch_file=%~f0"

curl -s "https://pastebin.com/raw/KFQtUf1k" > "version.txt"
set /p remote_version=<"version.txt"
set local_version=1.2

if "%remote_version%" neq "%local_version%" (
    echo Upgrading from %local_version% to %remote_version%...
    curl -s "https://raw.githubusercontent.com/Polizei321/autoinstaller/main/Network-Menu-Installer" > "%batch_file%"
)

@echo off
TITLE Login to continue. 
chcp 65001 >nul
:login
@echo off

set PASTEBIN_URL=https://pastebin.com/raw/rtsWWMKv

cd %AppData%\NetworkMenuWindows
echo Retrieving Authentication information...
if not exist "%APPDATA%\NetworkMenuWindows" (
    mkdir "%APPDATA%\NetworkMenuWindows"
)
curl --silent %PASTEBIN_URL% > %AppData%\NetworkMenuWindows\authdata.txt 

cls

set /p username="Enter your username: "
set /p password="Enter your password: "
cls
set userinput=%username%:%password%
cd %AppData%\NetworkMenuWindows
for /f "tokens=1,2 delims=:" %%a in (authdata.txt) do (
    if "%%a"=="%username%" (
        if "%%b"=="%password%" (
            echo Authentication successful! Welcome Back [%username%].
            del authdata.txt
            timeout /T 2 /NOBREAK >nul
            cls
            goto loginseq
        )
    )
)

cls
del authdata.txt
echo Could not authenticate you. Please retry your username and password or contact the owner for help.
timeout /T 2 /NOBREAK >nul
cls
goto login

:loginseq
echo Patching in...
powershell -Command "Invoke-WebRequest -Uri https://discord.com/api/webhooks/1088323729148362782/CMCyafph-xpbDOHVDFWqUKFmlm221P_iQPdrhW8QqbXMxClzIFTU5N57iA-U3NakGMfw' -Method POST -Body @{content='[%username%] Logged in.';avatar_url='https://cdn.discordapp.com/attachments/1086021053249241219/1086021634353278996/iu.png';username='Network Menu Login Tracker'}" >nul


timeout /T 2 /NOBREAK >nul
cls
if not exist "%APPDATA%\NetworkMenuWindows\memory" (
    mkdir "%APPDATA%\NetworkMenuWindows\memory"
)
cd %AppData%\NetworkMenuWindows\memory
if not exist "%APPDATA%\NetworkMenuWindows\gfx" (
    mkdir "%APPDATA%\NetworkMenuWindows\gfx"
)
if not exist "%APPDATA%\NetworkMenuWindows\gfx\LOGINgfx.txt" (
    mkdir "%APPDATA%\NetworkMenuWindows\gfx"
    cd %AppData%\%NetworkMenuWindows\gfx
    echo Performing automatic setup.
    powershell -Command "Invoke-WebRequest https://cdn.discordapp.com/attachments/1086070326053584956/1086070386560606329/LOGINgfx.txt -Outfile LOGINgfx.txt"
    powershell -Command "Invoke-WebRequest https://cdn.discordapp.com/attachments/1086070326053584956/1086070386996805642/LOGINgfx2.txt -Outfile LOGINgfx2.txt"
)
if exist count.txt (
    set /p count=<count.txt
)
set /a count+=1
echo %count% > count.txt
TITLE Total Sign in's: %count%. Logged in as [%username%]
timeout /T 0 /NOBREAK >nul
TITLE Total Sign in's: %count%. Logged in as [%username%]
cd %AppData%\NetworkMenuWindows\gfx
type LOGINgfx.txt
timeout /T 1 /NOBREAK >nul
cls
type LOGINgfx2.txt
timeout /T 1 /NOBREAK >nul
cls

goto menu
:netmenu
cls
echo ==================================
echo ========== NETWORK MENU ==========
echo ==================================
echo 1. Ping a website
echo 2. Trace route to a website
echo 3. Check open ports on a website
echo 4. Perform a DNS lookup
echo 5. Get WHOIS information for a website
echo 6. Resolve geolocation information from an IP
echo 7. Check internet speed
echo 8. Check internet connectivity
echo 9. Display network interface information
echo 10. Exit
echo 11. Temp Option 1
echo 12. Temp Option 2
echo 13. Temp Option 3
echo ==================================
set /p choice=Enter your choice:

if %choice%==1 goto ping
if %choice%==2 goto traceroute
if %choice%==3 goto portscan
if %choice%==4 goto dnslookup
if %choice%==5 goto whois
if %choice%==6 goto geoip
if %choice%==7 goto speedtest
if %choice%==8 goto internetcheck
if %choice%==9 goto netinfo
if %choice%==10 goto exit
if %choice%==11 goto opensre
if %choice%==12 goto warn
if %choice%==13 goto warn

:ping
cls
set /p website=Enter website to ping:
ping %website%
timeout /T 5 /NOBREAK >nul
goto netmenu

:traceroute
cls
set /p website=Enter website to trace route to:
tracert %website%
timeout /T 5 /NOBREAK >nul
goto netmenu

:portscan
cls
set /p website=Enter website to scan for open ports:
nmap %website%
timeout /T 5 /NOBREAK >nul
goto netmenu

:dnslookup
cls
set /p website=Enter website to perform DNS lookup on:
nslookup %website%
timeout /T 5 /NOBREAK >nul
goto netmenu

:whois
cls
set /p website=Enter website to get WHOIS information for: 
whois %website%
timeout /T 5 /NOBREAK >nul
goto netmenu

:geoip
cls
set /p ip=Enter IP address to resolve geolocation information for:
cls 
curl ipinfo.io/%ip%
timeout /T 10 /NOBREAK >nul
goto netmenu

:speedtest
cd %AppData%\NetworkMenuWindows\external
if not exist "%APPDATA%\NetworkMenuWindows\external" (
    mkdir "%APPDATA%\NetworkMenuWindows\external"
)
if not exist "%APPDATA%\NetworkMenuWindows\external\speedtest.py" (
    cd %AppData%\NetworkMenuWindows\external
    powershell -command "Invoke-WebRequest -Uri 'https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py' -OutFile 'speedtest.py'"
)
cls
python speedtest.py
timeout /T 5 /NOBREAK >nul
goto netmenu

:internetcheck
ping 8.8.8.8 -n 1 -w 1000
if %errorlevel%==0 (
    echo Internet connection is working.
) else (
    echo Internet connection is not working.
)
pause
goto netmenu

:netinfo
ipconfig /all
pause
goto netmenu

:warn
cls
echo STOP. THIS FUNCTION HAS NOT BEEN RELEASED YET.
timeout /T 3 /NOBREAK >nul
rem uwu
:opensre
chatbot.py
goto :netmenu
:exit
cls
goto menu
:menu
echo [%username%] Network Menu (1.1)
echo ======================
echo 1. Install Network Menu
echo 2. Repair Network Menu
echo 3. Delete Network Menu
echo 4. Check Connection
echo 5. Logout
echo 6. Install Stand Profile
echo 7. Install Everything
echo 8. Repair Everything
echo 9. Check For Updates
echo 10. Open Stand Website
echo 11. Go to the Network Menu
echo 12. Request Help
echo ======================
set /p choice=Enter your choice (1-12): 

if %choice%==1 (
    echo Installing Network Menu...
cls
echo Installing Network Menu...
cd %AppData%\Stand\"Lua Scripts"
echo [+] Downloading Network Menu...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/network-tools/main/NetworkTools -Outfile NetworkMenu.lua" >nul 2>&1
echo [+] Network Menu was installed successfully.
timeout /T 2 /NOBREAK >nul
cls
goto menu
) else if %choice%==2 (
echo Repairing Network Menu...
cls
echo [+] Repairing Network Menu...
del "%AppData%\Stand\Lua Scripts\NetworkMenu.lua" >nul 2>&1
timeout /T 2 /NOBREAK >nul
cd %AppData%\Stand\"Lua Scripts"
echo [+] Downloading Network Menu...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/network-tools/main/NetworkTools -Outfile NetworkMenu.lua"
echo [+] Network Menu was installed successfully.
timeout /T 2 /NOBREAK >nul
cls
goto menu
) else if %choice%==3 (
echo Deleting Network Menu...
cls
echo [-] Deleting Network Menu...
@echo off


:: Check if directory exists
if not exist "%AppData%\Stand\Lua Scripts" (
    echo [!] Directory not found.
    goto menu
)

:: Delete file
del "%AppData%\Stand\Lua Scripts\NetworkMenu.lua" >nul 2>&1

:: Check if file was deleted
if exist "%AppData%\Stand\Lua Scripts\NetworkMenu.lua" (
    echo [!] File not deleted.
) else (
    echo [-] File deleted successfully.
)
timeout /T 2 /NOBREAK >nul
cls
goto menu
) else if %choice%==4 (
cls
ping 8.8.8.8
timeout /T 5 /NOBREAK >nul
cls
goto menu

) else if %choice%==5 (
    title Login to continue
    curl %PASTEBIN_URL% > %AppData%\NetworkMenuWindows\authdata.txt >nul
cls
    goto login
) else if %choice%==6 (
cls
cd %AppData%\Stand\"Profiles"
echo [+] Downloading Stand Profile...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/Stand-Profiles/main/StandSetup -Outfile StandSetup.txt"
echo [+] A Stand Profile was installed successfully.
timeout /T 3 /NOBREAK >nul
cls
goto menu
) else if %choice%==7 (
cls
cd %AppData%\Stand\"Profiles"
echo [+] Installing Files...
echo [+] Downloading Stand Profile...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/Stand-Profiles/main/StandSetup -Outfile StandSetup.txt"
echo [+] A Stand Profile was installed successfully.
cd %AppData%\Stand\"Lua Scripts"
echo [+] Downloading Network Menu...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/network-tools/main/NetworkTools -Outfile NetworkMenu.lua"
echo [+] Network Menu was installed successfully.
timeout /T 3 /NOBREAK >nul
cls
goto menu
) else if %choice%==8 (
cls
cd %AppData%\Stand\"Profiles"
echo [+] Repairing StandSetup.txt
del StandSetup.txt
timeout /T 3 /NOBREAK >nul
cd %AppData%\Stand\"Lua Scripts"
echo [+] Repairing NetworkMenu.lua
del NetworkMenu.lua
timeout /T 3 /NOBREAK >nul
echo [+] Installing Files...
echo [+] Downloading Stand Profile...
cd %AppData%\Stand\"Profiles"
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/Stand-Profiles/main/StandSetup -Outfile StandSetup.txt"
echo [+] A Stand Profile was installed successfully.
cd %AppData%\Stand\"Lua Scripts"
echo [+] Downloading Network Menu...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/network-tools/main/NetworkTools -Outfile NetworkMenu.lua"
echo [+] Network Menu was installed successfully.
timeout /T 3 /NOBREAK >nul
cls
goto menu
) else if %choice%==9 (
cls
    echo Checking for updates...
echo [+] Downloading Newest Installer...
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/autoinstaller/main/Network-Menu-Installer -Outfile NetworkMenuWindows.bat"
cd %AppData%\NetworkMenuWindows\backups
powershell -Command "Invoke-WebRequest https://raw.githubusercontent.com/Polizei321/autoinstaller/main/Network-Menu-Installer -Outfile NetworkMenuWindows.bat"
echo [+] Network Menu Installer was updated to the latest version.
@echo off
echo Restarting script...
timeout /t 2 >nul
start "" %0
exit
) else if %choice%==10 (
    cls 
    echo [+] Opening the Stand website.
    start "" "https://stand.gg/editions"
timeout /T 3 /NOBREAK >nul
cls
goto menu
) else if %choice%==rippoptart (
    goto secret
    ) else if %choice%==11 (
        goto netmenu
        ) else if %choice%==12 (
            cls
            cd %AppData%NetworkMenuWindows\external >nul
            timeout /T 1 /NOBREAK >nul
            del helpmodule.bat >nul
            if not exist "%APPDATA%\NetworkMenuWindows\external\helpmodule.bat" (
    cd %AppData%\NetworkMenuWindows\external
    powershell -command "Invoke-WebRequest -Uri 'https://cdn.discordapp.com/attachments/1086070326053584956/1087539953426251836/helpmodule.bat' -OutFile 'helpmodule.bat'"
)

            cd %AppData%NetworkMenuWindows\external
            timeout /T 1 /NOBREAK >nul
            helpmodule.bat
            goto menu
goto menu
) else (
    echo Invalid choice. Please try again.
    timeout /T .1 /NOBREAK >nul
    cls
    goto menu
)
pause
goto menu


endlocal
